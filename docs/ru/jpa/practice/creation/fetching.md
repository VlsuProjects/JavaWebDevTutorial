# Стратегии Извлечения в Spring Boot с JPA: Понимание Ленивой и Агрессивной Загрузки

## Введение

Это руководство исследует стратегии извлечения в проекте Spring Boot с использованием JPA (Java Persistence API). Конкретно мы погрузимся в понятия ленивой и агрессивной загрузки и как они применяются в отношениях между сущностями.

## Цель

Цель этого руководства - предоставить полное понимание стратегий извлечения в JPA. К концу этого руководства вы поймете, когда использовать ленивую и агрессивную загрузку и как их реализовать в вашем приложении.

## Стратегии Извлечения

### Сценарий

В наших отношениях между сущностями у нас есть отношение Один-ко-Многим между сущностью `Student` и сущностью `Enrollment`. Точно так же, существует отношение Один-ко-Многим между сущностью `Course` и сущностью `Enrollment`.

#### Сущность Student

В сущности `Student` у нас есть отношение Один-ко-Многим с сущностью `Enrollment`. У каждого студента может быть несколько записей на курсы.

Для представления этого отношения мы используем аннотацию `@OneToMany` с `mappedBy = "student"` в сущности `Student`. Здесь у нас есть выбор между стратегиями ленивой и агрессивной загрузки для извлечения связанных записей.

```java
@OneToMany(mappedBy = "student", fetch = FetchType.EAGER, cascade = CascadeType.ALL)
private List<Enrollment> enrollments;
```

В этом сценарии мы выбираем агрессивную загрузку (`FetchType.EAGER`). Поскольку мы обычно ожидаем получить доступ ко всем записям студента вместе, агрессивная загрузка гарантирует, что все записи будут извлечены немедленно при загрузке студента.

#### Сущность Course

Аналогично, в сущности `Course` у нас также есть отношение Один-ко-Многим с сущностью `Enrollment`. У каждого курса может быть несколько записей на курсы.

Для представления этого отношения мы используем аннотацию `@OneToMany` с `mappedBy = "course"` в сущности `Course`. Здесь у нас также есть выбор между стратегиями ленивой и агрессивной загрузки для извлечения связанных записей.

```java
@OneToMany(mappedBy = "course", fetch = FetchType.LAZY, cascade = CascadeType.ALL)
private List<Enrollment> enrollments;
```

В этом сценарии мы выбираем ленивую загрузку (`FetchType.LAZY`). Поскольку нам не всегда нужно получать доступ ко всем записям курса, ленивая загрузка гарантирует, что записи будут извлечены только при явном запросе.

---

# [Далее: Создание Репозитория](../interacting/repository.md)
